{"workflows": {"Nested Workflow": {"stages": [{"dependencies": {"dependency_type": "jsonpath_ready", "expressions": ["init"]}, "name": "prepare", "scheduler": {"step": {"process": {"cmd": "./paramfromtemplate.py inputs/template_paramcard.dat {param_card}  -i \"{{kHzz: {kHzz}, kAzz: {kAzz}, kHww: {kHww}, kAww: {kAww}}}\"", "process_type": "string-interpolated-cmd"}, "publisher": {"publisher_type": "frompar-pub", "outputmap": {"param_card": "param_card"}}, "environment": {"imagetag": "latest", "image": "lukasheinrich/higgs-mc-studies", "envscript": "", "environment_type": "docker-encapsulated", "env": {}, "resources": []}}, "scheduler_type": "singlestep-stage", "parameters": {"kAzz": {"output": "kAzz", "stages": "init"}, "param_card": "{workdir}/param.dat", "kHzz": {"output": "kHzz", "stages": "init"}, "kAww": {"output": "kAww", "stages": "init"}, "kHww": {"output": "kHww", "stages": "init"}}}}, {"dependencies": {"dependency_type": "jsonpath_ready", "expressions": ["prepare"]}, "name": "grid", "scheduler": {"step": {"process": {"cmd": "./scripts/setupgrid.sh {param_card} {gridpack}", "process_type": "string-interpolated-cmd"}, "publisher": {"publisher_type": "frompar-pub", "outputmap": {"gridpack": "gridpack"}}, "environment": {"imagetag": "latest", "image": "lukasheinrich/higgs-mc-studies", "envscript": "", "environment_type": "docker-encapsulated", "env": {}, "resources": []}}, "scheduler_type": "singlestep-stage", "parameters": {"param_card": {"output": "param_card", "stages": "prepare"}, "gridpack": "{workdir}/grid.tar.gz"}}}, {"dependencies": {"dependency_type": "jsonpath_ready", "expressions": ["grid"]}, "name": "subchain", "scheduler": {"scheduler_type": "multistep-stage", "scatter": {"method": "zip", "parameters": ["seed"]}, "parameters": {"nevents": {"output": "nevents", "stages": "init", "unwrap": true}, "gridpack": {"output": "gridpack", "stages": "grid", "unwrap": true}, "seed": {"output": "seeds", "stages": "init", "flatten": true}}, "workflow": {"stages": [{"dependencies": {"dependency_type": "jsonpath_ready", "expressions": ["init"]}, "name": "madevent", "scheduler": {"step": {"process": {"cmd": "./scripts/rungrid.sh {gridpack} {nevents} {seed} {lhefile}", "process_type": "string-interpolated-cmd"}, "publisher": {"publisher_type": "frompar-pub", "outputmap": {"lhefile": "lhefile"}}, "environment": {"imagetag": "latest", "image": "lukasheinrich/higgs-mc-studies", "envscript": "", "environment_type": "docker-encapsulated", "env": {}, "resources": []}}, "scheduler_type": "singlestep-stage", "parameters": {"lhefile": "{workdir}/lhefile.lhe", "nevents": {"output": "nevents", "stages": "init"}, "gridpack": {"output": "gridpack", "stages": "init"}, "seed": {"output": "seed", "stages": "init"}}}}, {"dependencies": {"dependency_type": "jsonpath_ready", "expressions": ["madevent"]}, "name": "pythia", "scheduler": {"step": {"process": {"cmd": "/analysis/pythia_main/example_main {settings_file} {hepmcfile} {lhefile}", "process_type": "string-interpolated-cmd"}, "publisher": {"publisher_type": "frompar-pub", "outputmap": {"hepmcfile": "hepmcfile"}}, "environment": {"imagetag": "latest", "image": "lukasheinrich/higgs-mc-studies", "envscript": "", "environment_type": "docker-encapsulated", "env": {}, "resources": []}}, "scheduler_type": "singlestep-stage", "parameters": {"lhefile": {"output": "lhefile", "stages": "madevent"}, "hepmcfile": "{workdir}/outputfile.hepmc", "settings_file": "/analysis/mainPythiaMLM.cmnd"}}}, {"dependencies": {"dependency_type": "jsonpath_ready", "expressions": ["pythia"]}, "name": "delphes", "scheduler": {"step": {"process": {"cmd": "DelphesHepMC {detector_card} {outputfile} {inputfile}", "process_type": "string-interpolated-cmd"}, "publisher": {"publisher_type": "frompar-pub", "outputmap": {"delphesoutput": "outputfile"}}, "environment": {"imagetag": "latest", "image": "lukasheinrich/higgs-mc-studies", "envscript": "", "environment_type": "docker-encapsulated", "env": {}, "resources": []}}, "scheduler_type": "singlestep-stage", "parameters": {"detector_card": "/analysis/template_cards/modified_delphes_card_ATLAS.tcl", "outputfile": "{workdir}/outputfile.root", "inputfile": {"output": "hepmcfile", "stages": "pythia"}}}}, {"dependencies": {"dependency_type": "jsonpath_ready", "expressions": ["delphes"]}, "name": "analysis", "scheduler": {"step": {"process": {"cmd": "./scripts/runpost.sh {fromdelphes} {analysis_output}", "process_type": "string-interpolated-cmd"}, "publisher": {"publisher_type": "frompar-pub", "outputmap": {"analysis_output": "analysis_output"}}, "environment": {"imagetag": "latest", "image": "lukasheinrich/higgs-mc-studies", "envscript": "", "environment_type": "docker-encapsulated", "env": {}, "resources": []}}, "scheduler_type": "singlestep-stage", "parameters": {"fromdelphes": {"output": "delphesoutput", "stages": "delphes"}, "analysis_output": "{workdir}/anaout.root"}}}]}}}, {"dependencies": {"dependency_type": "jsonpath_ready", "expressions": ["subchain"]}, "name": "rootmerge", "scheduler": {"step": {"process": {"cmd": "hadd {mergedfile} {inputfiles}", "process_type": "string-interpolated-cmd"}, "publisher": {"publisher_type": "frompar-pub", "outputmap": {"mergedfile": "mergedfile"}}, "environment": {"imagetag": "latest", "image": "lukasheinrich/higgs-mc-studies", "envscript": "", "environment_type": "docker-encapsulated", "env": {}, "resources": []}}, "scheduler_type": "singlestep-stage", "parameters": {"mergedfile": "{workdir}/anamerged.root", "inputfiles": {"output": "analysis_output", "stages": "subchain.[*].analysis"}}}}]}}, "basic_info": {"title": "DemoAnalysis"}}
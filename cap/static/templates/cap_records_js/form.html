<div class="cap-deposit" ng-class="{'collapsed' : !displayNav}">
  <ng-include src="'/static/templates/cap/deposit/components/depositSidebar.html'"></ng-include>
    <div class="cap-deposit-form-top-nav">
      <div ng-click="toggleSidebar()" class="cap-deposit-nav-toggle"><i class="sidebar-toggle"><i class="sidebar-toggle-inner"></i></i></div>
      <div class="cap-deposit-nav-component">
          <button ng-disabled="currentNavItem == 0"  ng-click="prevNavItem()" uib-tooltip="{{recordsVM.invenioRecordsForm[currentNavItem-1].title}}"><i class="fa fa-angle-left" aria-hidden="true"></i></button>
          <span>{{recordsVM.invenioRecordsForm[currentNavItem].title}}</span>
          <button ng-disabled="currentNavItem+1 == recordsVM.invenioRecordsForm.length" ng-click="nextNavItem()" uib-tooltip="{{recordsVM.invenioRecordsForm[currentNavItem+1].title}}"><i class="fa fa-angle-right" aria-hidden="true"></i></button>
      </div>
    </div>  
    <div class="cap-deposit-form">
    <div class="cap-deposit-form-inner">
      <div>
        <div class="alert alert-danger" style="margin: 15px 0;">
          <div class="progress">
            <div class="progress-bar progress-bar-danger progress-bar-striped" role="progressbar" aria-valuenow="100" aria-valuemin="0" aria-valuemax="100" style="width: 100%"></div>
          </div>
          WARNING: This is just a <strong>DEMO</strong>. Data saved is <strong>NOT</strong> backed-up at the moment and might be lost during any system upgrade
        </div>
      </div>      
      <div ng-if="error" id="file-error-message" class="alert alert-danger" role="alert">
        <span><strong>{{error}}</strong></span>
      </div>
      <div class="traffic-light" ng-if="!error && msg.state">
        <label>
          <input class="green" type="radio" ng-checked="isFinished">
          <div>
            <span class="green">All files are uploaded</span><br/>
            <span>You can now proceed sharing your analysis</span>
          </div>
        </label>
        <label>
          <input class="amber" type="radio" ng-checked="!isFinished">
          <div>
            <span class="amber">We are grabbing your files...</span><br/>
            <span>Downloading {{msg.meta.payload.percentage}} %</span>
          </div>
        </label>
      </div>
      <form
         name="depositionForm"
         class="form-horizontal"
         sf-schema="recordsVM.invenioRecordsSchema"
         sf-form="recordsVM.invenioRecordsForm"
         sf-model="recordsVM.invenioRecordsModel"
         sf-options="{ validateOnRender: true, formDefaults: { feedback: true, onChange: 'modelChanged(modelValue,form)', ngModelOptions: { updateOn: 'default blur', allowInvalid: true}, allowDisplay: true } }">
      </form>
    </div>
  </div>
</div>
